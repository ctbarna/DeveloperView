function loaderImage(c){if(c=="on"){$("#menu-bar").css("background-image","url('img/loader.gif')");return true}else{$("#menu-bar").css("background-image","none");return false}}
$(document).ready(function(){loaderImage("off");$("#main-view").height($(window).height());$("#username").change(function(){$.cookie("dv-user",$("#username").val().replace("/([|])/","-"),{expires:14});$("#user-div").css("border","1px solid white");$(".username-missing").hide()});$("#add-tag-btn").click(function(){if($("#username").val()==""){$("#tags .username-missing").show();$("#user-div").css("border","1px solid red");return false}loaderImage("on");$.ajax({type:"POST",dataType:"json",url:"process-ajax.php?action=add-tag",
data:"tags="+$("#add-tag").val()+"&user="+$("#username").val()+"&pageID="+$("#pageID").val(),success:function(a){loaderImage("off");for(var b=0;b<a.length;b++){$("#tags ul").append("<li id='tag["+a[b].TagID+"]' style='display:none'><abbr title='Added a moment ago by you'>"+a[b].tag+"</abbr> [<a href='#' class='remove-tag' title='Remove Tag &quot;"+a[b].tag+"&quot;'>X</a>]</li>");$("#tags ul li:last").fadeIn("slow")}$("#add-tag").attr("value","")}})});$(".remove-tag").live("click",function(){loaderImage("on");
var a=$(this).parent();confirm("Are you sure you want to remove the tag '"+a.children("abbr").text()+"'?")&&$.ajax({type:"GET",dataType:"json",url:"process-ajax.php",data:"action=remove-tag&pageID="+$("#pageID").val()+"&tagID="+a.attr("ID").replace(/[^\d\.]/g,""),success:function(){loaderImage("off");$(a.fadeOut("slow"))}})});$("#add-note-btn").live("click",function(){if($("#username").val()==""){$("#user-div").css("border","1px solid red");$("#notes .username-missing").show();return false}loaderImage("on");
$.ajax({type:"POST",url:"process-ajax.php?action=add-note",dataType:"json",data:"note="+$("#note").val()+"&user="+$("#username").val()+"&pageID="+$("#pageID").val(),success:function(a){loaderImage("off");a.NoteID&&$("#notes ul").append("<li id='note["+a.NoteID+"]' style='display:none'>"+$("#note").val()+"<div class='note-info'> Added just a moment ago by You<div class='remove-note-div'>\r\n[<a href='#' class='remove-note' title='Delete This Note'>X</a>]\r\n</div></div></li>");$("#notes ul li:last").fadeIn("slow");
$("#note").attr("value","")}})});$(".remove-note").live("click",function(){loaderImage("on");var a=$(this).parent().parent().parent();confirm("Are you sure you want to delete this note?")&&$.ajax({type:"GET",dataType:"json",url:"process-ajax.php",data:"action=remove-note&noteID="+a.attr("ID").replace(/[^\d\.]/g,"")+"&pageID="+$("#pageID").val(),success:function(){loaderImage("off");$("#notes .loader").hide();$(a.fadeOut("slow"))}})});$("#notes ul li").live("mouseover",function(){$(this).children().children().show()});
$("#notes ul li").live("mouseout",function(){$(this).children().children().hide()});$("#add-tag").autocomplete(tags,{multiple:true,autoFill:true});loaderImage("on");$.ajax({type:"GET",dataType:"json",url:"process-ajax.php",data:"action=get-analytics&url="+$("#pageURL").val(),success:function(a){loaderImage("off");$("#metadata #loading").hide();$("#metadata .content").append(a);$("#metadata").height()>24&&$("#metadata").height($("#metadata").height()+10)},error:function(){loaderImage("off");$("#metadata #loading").hide()}});
$(".drawer h3").click(function(){function a(){var b=[];$("#panels .drawer").each(function(d){b[d]=$(this).height()<30?"off":"on"});$.cookie("dv-pannels",b)}contentHeight=$(this).siblings(".content").height()+15;headHeight=$(this).height();totalHeight=contentHeight+headHeight;$(this).siblings(".content").toggle();if($(this).siblings(".content").is(":visible")){$(this).parent().animate({height:[totalHeight]},null,null,function(){a()});$(this).css("background-image","url(img/arrow-down.png)")}else{$(this).parent().animate({height:headHeight},
null,null,function(){a()});$(this).css("background-image","url(img/arrow-up.png)")}});$(".drawer").height(24);$(".drawer").hover(function(){$(this).height()<=24&&$(this).animate({height:29},100)},function(){$(this).height()<=29&&$(this).animate({height:24},100)});$("#address-go").click(function(){window.location="?url="+$("#url").val()});for(var c=0;c<$("#panels .drawer").length;c++)$.cookie("dv-pannels").split(",")[c]=="on"&&$("#panels .drawer:eq("+c+") h3").click();document.title="Developer View - "+
$("#main-view").documentElement.title});